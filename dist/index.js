// Generated by CoffeeScript 1.10.0
(function() {
  var _, addDefaults, addFirst, addLast, merge, removeAt, replaceAt, set, setIn;

  _ = require('lodash');

  addLast = function(array, val) {
    return array.concat([val]);
  };

  addFirst = function(array, val) {
    return [val].concat(array);
  };

  removeAt = function(array, idx) {
    return array.slice(0, idx).concat(array.slice(idx + 1));
  };

  replaceAt = function(array, idx, newItem) {
    if (array[idx] === newItem) {
      return array;
    }
    return array.slice(0, idx).concat([newItem]).concat(array.slice(idx + 1));
  };

  set = function(obj, key, val) {
    var obj3;
    if (obj[key] === val) {
      return obj;
    }
    return _.extend({}, obj, (
      obj3 = {},
      obj3["" + key] = val,
      obj3
    ));
  };

  setIn = function(obj, path, val, idx) {
    var key, newValue;
    if (idx == null) {
      idx = 0;
    }
    key = path[idx];
    if (idx === path.length - 1) {
      newValue = val;
    } else {
      newValue = setIn(obj[key], path, val, idx + 1);
    }
    return set(obj, key, newValue);
  };

  merge = function(obj1, obj2) {
    var fSomethingNew, i, key, keys2, len;
    if (obj2 == null) {
      return obj1;
    }
    keys2 = Object.keys(obj2);
    if (!keys2.length) {
      return obj1;
    }
    fSomethingNew = false;
    for (i = 0, len = keys2.length; i < len; i++) {
      key = keys2[i];
      if (obj1[key] !== obj2[key]) {
        fSomethingNew = true;
        break;
      }
    }
    if (!fSomethingNew) {
      return obj1;
    }
    return _.extend(_.clone(obj1), obj2);
  };

  addDefaults = function(obj, defaults) {
    if ((defaults == null) || !Object.keys(defaults).length) {
      return obj;
    }
    return _.defaults(_.clone(obj), defaults);
  };

  module.exports = {
    addLast: addLast,
    addFirst: addFirst,
    removeAt: removeAt,
    replaceAt: replaceAt,
    merge: merge,
    addDefaults: addDefaults,
    set: set,
    setIn: setIn
  };

}).call(this);
